name = "SSA"
# precompileModules = true # Ensure that reflective code that uses native_decide runs compiled code, not in the ir_interpreter.
defaultTargets = ["SSA"]
moreLeanArgs = ["--tstack=400000"]
moreServerArgs = ["--tstack=400000"]

[[require]]
name = "TacBench"
path = "TacBench"
rev = "main"

[[require]]
name = "Blase"
path = "Blase"
rev = "main"

[[require]]
name = "EvaluationHarness"
path = "EvaluationHarness"

[[require]]
name = "mathlib"
git = "https://github.com/leanprover-community/mathlib4-nightly-testing"
rev = "nightly-testing-2025-08-11"

[[require]]
name = "Cli"
git = "https://github.com/mhuisi/lean4-cli.git"
rev = "main"

[[require]]
name = "leanwuzla"
git = "https://github.com/hargoniX/Leanwuzla.git"
rev = "main"

[[lean_lib]]
name = "SSA"

[[lean_lib]]
name = "AliveExamples"
roots = ["SSA.Projects.InstCombine.AliveAutoGenerated"]

[[lean_lib]]
name = "AliveStatements"
roots = ["SSA.Projects.InstCombine.AliveStatements"]

[[lean_lib]]
name = "AliveScaling"
roots = ["SSA.Projects.InstCombine.ScalingTest"]

[[lean_exe]]
name = "mlirnatural"
root = "SSA.MLIRNatural"

[[lean_exe]]
name = "bv-circuit-profile-kinduction"
root = "SSA.Experimental.Bits.KInduction.ProfileKInduction"

[[lean_exe]]
name = "bv-automata-profile"
root = "SSA.Experimental.Bits.AutoStructs.Profile"

[[lean_exe]]
name = "opt"
root = "SSA.Projects.InstCombine.LLVM.Opt"
supportInterpreter = true

[[lean_exe]]
name = "ssaLLVMEnumerator"
root = "SSA.Projects.InstCombine.LLVM.Enumerator"

[[lean_lib]]
name = "Tests"
root = "SSA.Tests.Tests"

[[lean_lib]]
name = "core"
roots = ["SSA.Core"]

[[lean_lib]]
name = "CIRCT"
roots = ["SSA.Projects.CIRCT.CIRCT"]

[[lean_lib]]
name = "ISL"
roots = ["SSA.Projects.ISL.ISL"]

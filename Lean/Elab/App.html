<html lang="en"><head><meta charset="UTF-8"></meta><meta name="viewport" content="width=device-width, initial-scale=1"></meta><link rel="stylesheet" href="../.././style.css"></link><link rel="stylesheet" href="../.././src/pygments.css"></link><link rel="shortcut icon" href="../.././favicon.ico"></link><link rel="prefetch" href="../.././/declarations/declaration-data.bmp" as="image"></link><title>Lean.Elab.App</title><script defer="true" src="../.././mathjax-config.js"></script><script defer="true" src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script><script defer="true" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script><script>const SITE_ROOT="../.././";</script><script>const MODULE_NAME="Lean.Elab.App";</script><script type="module" src="../.././search.js"></script><script type="module" src="../.././how-about.js"></script><script type="module" src="../.././instances.js"></script><script type="module" src="../.././importedBy.js"></script></head><body><input id="nav_toggle" type="checkbox"></input><header><h1><label for="nav_toggle"></label>Documentation</h1><p class="header_filename break_within"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">App</span></p><form action="https://google.com/search" method="get" id="search_form"><input type="hidden" name="sitesearch" value="https://leanprover-community.github.io/mathlib4_docs"></input><input type="text" name="q" autocomplete="off"></input>&#32;
            <button id="search_button" onclick="javascript: form.action='../.././search.html';">Search</button><button>Google site search</button></form></header><nav class="internal_nav"><h3><a class="break_within" href="#top"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">App</span></a></h3><p class="gh_nav_link"><a href="https://github.com/leanprover/lean4/blob/ebc32af2e606deef0d7b437e67f24c20ed866818/src/Lean/Elab/App.lean">source</a></p><div class="imports"><details><summary>Imports</summary><ul><li><a href="../.././Init.html">Init</a></li><li><a href="../.././Lean/Elab/Arg.html">Lean.Elab.Arg</a></li><li><a href="../.././Lean/Elab/Binders.html">Lean.Elab.Binders</a></li><li><a href="../.././Lean/Elab/RecAppSyntax.html">Lean.Elab.RecAppSyntax</a></li><li><a href="../.././Lean/Elab/SyntheticMVars.html">Lean.Elab.SyntheticMVars</a></li><li><a href="../.././Lean/Elab/Term.html">Lean.Elab.Term</a></li><li><a href="../.././Lean/Meta/KAbstract.html">Lean.Meta.KAbstract</a></li><li><a href="../.././Lean/Parser/Term.html">Lean.Parser.Term</a></li><li><a href="../.././Lean/Util/FindMVar.html">Lean.Util.FindMVar</a></li><li><a href="../.././Lean/Meta/Tactic/ElimInfo.html">Lean.Meta.Tactic.ElimInfo</a></li></ul></details><details><summary>Imported by</summary><ul id="imported-by-Lean.Elab.App" class="imported-by-list"></ul></details></div><div class="nav_link"><a class="break_within" href="#Lean.Elab.Term.elabWithoutExpectedTypeAttr"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Term</span>.<span class="name">elabWithoutExpectedTypeAttr</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Elab.Term.hasElabWithoutExpectedType"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Term</span>.<span class="name">hasElabWithoutExpectedType</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Elab.Term.instToStringArg"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Term</span>.<span class="name">instToStringArg</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Elab.Term.instToStringNamedArg"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Term</span>.<span class="name">instToStringNamedArg</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Elab.Term.throwInvalidNamedArg"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Term</span>.<span class="name">throwInvalidNamedArg</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Elab.Term.synthesizeAppInstMVars"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Term</span>.<span class="name">synthesizeAppInstMVars</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Elab.Term.eraseNamedArg"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Term</span>.<span class="name">eraseNamedArg</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Elab.Term.ElabAppArgs.Context"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Term</span>.<span class="name">ElabAppArgs</span>.<span class="name">Context</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Elab.Term.ElabAppArgs.State"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Term</span>.<span class="name">ElabAppArgs</span>.<span class="name">State</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Elab.Term.ElabAppArgs.M"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Term</span>.<span class="name">ElabAppArgs</span>.<span class="name">M</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Elab.Term.ElabAppArgs.trySynthesizeAppInstMVars"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Term</span>.<span class="name">ElabAppArgs</span>.<span class="name">trySynthesizeAppInstMVars</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Elab.Term.ElabAppArgs.synthesizeAppInstMVars"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Term</span>.<span class="name">ElabAppArgs</span>.<span class="name">synthesizeAppInstMVars</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Elab.Term.ElabAppArgs.eraseNamedArg"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Term</span>.<span class="name">ElabAppArgs</span>.<span class="name">eraseNamedArg</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Elab.Term.ElabAppArgs.main"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Term</span>.<span class="name">ElabAppArgs</span>.<span class="name">main</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Elab.Term.elabAsElim"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Term</span>.<span class="name">elabAsElim</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Elab.Term.ElabElim.Context"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Term</span>.<span class="name">ElabElim</span>.<span class="name">Context</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Elab.Term.ElabElim.State"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Term</span>.<span class="name">ElabElim</span>.<span class="name">State</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Elab.Term.ElabElim.M"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Term</span>.<span class="name">ElabElim</span>.<span class="name">M</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Elab.Term.ElabElim.mkMotive"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Term</span>.<span class="name">ElabElim</span>.<span class="name">mkMotive</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Elab.Term.ElabElim.revertArgs"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Term</span>.<span class="name">ElabElim</span>.<span class="name">revertArgs</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Elab.Term.ElabElim.finalize"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Term</span>.<span class="name">ElabElim</span>.<span class="name">finalize</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Elab.Term.ElabElim.getNextArg?"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Term</span>.<span class="name">ElabElim</span>.<span class="name">getNextArg?</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Elab.Term.ElabElim.setMotive"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Term</span>.<span class="name">ElabElim</span>.<span class="name">setMotive</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Elab.Term.ElabElim.addDiscr"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Term</span>.<span class="name">ElabElim</span>.<span class="name">addDiscr</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Elab.Term.ElabElim.saveArgInfo"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Term</span>.<span class="name">ElabElim</span>.<span class="name">saveArgInfo</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Elab.Term.ElabElim.mkImplicitArg"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Term</span>.<span class="name">ElabElim</span>.<span class="name">mkImplicitArg</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Elab.Term.ElabElim.main"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Term</span>.<span class="name">ElabElim</span>.<span class="name">main</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Elab.Term.elabAppArgs"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Term</span>.<span class="name">elabAppArgs</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Elab.Term.elabAppArgs.elabAsElim?"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Term</span>.<span class="name">elabAppArgs</span>.<span class="name">elabAsElim?</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Elab.Term.elabAppArgs.getElabAsElimExtraArgsPos"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Term</span>.<span class="name">elabAppArgs</span>.<span class="name">getElabAsElimExtraArgsPos</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Elab.Term.elabAppArgs.isFirstOrder"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Term</span>.<span class="name">elabAppArgs</span>.<span class="name">isFirstOrder</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Elab.Term.LValResolution"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Term</span>.<span class="name">LValResolution</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Elab.Term.elabExplicitUnivs"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Term</span>.<span class="name">elabExplicitUnivs</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Elab.Term.elabApp"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Term</span>.<span class="name">elabApp</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Elab.Term.elabIdent"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Term</span>.<span class="name">elabIdent</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Elab.Term.elabNamedPattern"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Term</span>.<span class="name">elabNamedPattern</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Elab.Term.elabDotIdent"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Term</span>.<span class="name">elabDotIdent</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Elab.Term.elabExplicitUniv"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Term</span>.<span class="name">elabExplicitUniv</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Elab.Term.elabPipeProj"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Term</span>.<span class="name">elabPipeProj</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Elab.Term.elabExplicit"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Term</span>.<span class="name">elabExplicit</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Elab.Term.elabChoice"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Term</span>.<span class="name">elabChoice</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Elab.Term.elabProj"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Term</span>.<span class="name">elabProj</span></a></div></nav><main>
<div class="decl" id="Lean.Elab.Term.elabWithoutExpectedTypeAttr"><div class="opaque"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/ebc32af2e606deef0d7b437e67f24c20ed866818/src/Lean/Elab/App.lean#L19-L20">source</a></div><div class="decl_header"><span class="decl_kind">opaque</span>
<span class="decl_name"><a class="break_within" href="../.././Lean/Elab/App.html#Lean.Elab.Term.elabWithoutExpectedTypeAttr"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Term</span>.<span class="name">elabWithoutExpectedTypeAttr</span></a></span><span class="decl_args"> :</span><div class="decl_type"><a href="../.././Lean/Attributes.html#Lean.TagAttribute">Lean.TagAttribute</a></div></div></div></div><div class="decl" id="Lean.Elab.Term.hasElabWithoutExpectedType"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/ebc32af2e606deef0d7b437e67f24c20ed866818/src/Lean/Elab/App.lean#L22-L23">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../.././Lean/Elab/App.html#Lean.Elab.Term.hasElabWithoutExpectedType"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Term</span>.<span class="name">hasElabWithoutExpectedType</span></a></span><span class="decl_args">
<span class="fn">(env : <a href="../.././Lean/Environment.html#Lean.Environment">Lean.Environment</a>)</span></span>
<span class="decl_args">
<span class="fn">(declName : <a href="../.././Init/Prelude.html#Lean.Name">Lean.Name</a>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><a href="../.././Init/Prelude.html#Bool">Bool</a></div></div><details><summary>Equations</summary><ul class="equations"><li class="equation"><span class="fn"><span class="fn"><a href="../.././Lean/Elab/App.html#Lean.Elab.Term.hasElabWithoutExpectedType">Lean.Elab.Term.hasElabWithoutExpectedType</a> <span class="fn">env</span> <span class="fn">declName</span></span> <a href="../.././Init/Prelude.html#Eq">=</a>   <span class="fn"><a href="../.././Lean/Attributes.html#Lean.TagAttribute.hasTag">Lean.TagAttribute.hasTag</a> <a href="../.././Lean/Elab/App.html#Lean.Elab.Term.elabWithoutExpectedTypeAttr">Lean.Elab.Term.elabWithoutExpectedTypeAttr</a> <span class="fn">env</span> <span class="fn">declName</span></span></span></li></ul></details></div></div><div class="decl" id="Lean.Elab.Term.instToStringArg"><div class="instance"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/ebc32af2e606deef0d7b437e67f24c20ed866818/src/Lean/Elab/App.lean#L25-L28">source</a></div><div class="decl_header"><span class="decl_kind">instance</span>
<span class="decl_name"><a class="break_within" href="../.././Lean/Elab/App.html#Lean.Elab.Term.instToStringArg"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Term</span>.<span class="name">instToStringArg</span></a></span><span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../.././Init/Data/ToString/Basic.html#ToString">ToString</a> <a href="../.././Lean/Elab/Arg.html#Lean.Elab.Term.Arg">Lean.Elab.Term.Arg</a></span></div></div><details><summary>Equations</summary><ul class="equations"><li class="equation"><span class="fn"><a href="../.././Lean/Elab/App.html#Lean.Elab.Term.instToStringArg">Lean.Elab.Term.instToStringArg</a> <a href="../.././Init/Prelude.html#Eq">=</a>   <span class="fn">{
    <span class="fn">toString</span> := <span class="fn">fun <span class="fn">x</span> =&gt
      <span class="fn">match <span class="fn">x</span> with
      | <span class="fn"><a href="../.././Lean/Elab/Arg.html#Lean.Elab.Term.Arg.expr">Lean.Elab.Term.Arg.stx</a> <span class="fn">val</span></span> =&gt <span class="fn"><a href="../.././Init/Data/ToString/Basic.html#ToString.toString">toString</a> <span class="fn">val</span></span>
      | <span class="fn"><a href="../.././Lean/Elab/Arg.html#Lean.Elab.Term.Arg.expr">Lean.Elab.Term.Arg.expr</a> <span class="fn">val</span></span> =&gt <span class="fn"><a href="../.././Init/Data/ToString/Basic.html#ToString.toString">toString</a> <span class="fn">val</span></span></span></span> }</span></span></li></ul></details></div></div><div class="decl" id="Lean.Elab.Term.instToStringNamedArg"><div class="instance"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/ebc32af2e606deef0d7b437e67f24c20ed866818/src/Lean/Elab/App.lean#L30-L31">source</a></div><div class="decl_header"><span class="decl_kind">instance</span>
<span class="decl_name"><a class="break_within" href="../.././Lean/Elab/App.html#Lean.Elab.Term.instToStringNamedArg"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Term</span>.<span class="name">instToStringNamedArg</span></a></span><span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../.././Init/Data/ToString/Basic.html#ToString">ToString</a> <a href="../.././Lean/Elab/Arg.html#Lean.Elab.Term.NamedArg">Lean.Elab.Term.NamedArg</a></span></div></div><details><summary>Equations</summary><ul class="equations"><li class="equation"><span class="fn"><a href="../.././Lean/Elab/App.html#Lean.Elab.Term.instToStringNamedArg">Lean.Elab.Term.instToStringNamedArg</a> <a href="../.././Init/Prelude.html#Eq">=</a> <span class="fn">{ <span class="fn">toString</span> := <span class="fn">fun <span class="fn">s</span> =&gt <span class="fn"><span class="fn"><span class="fn"><span class="fn"><span class="fn">&quot(&quot</span> <a href="../.././Init/Prelude.html#HAppend.hAppend">++</a> <span class="fn"><a href="../.././Init/Data/ToString/Basic.html#ToString.toString">toString</a> <span class="fn"><span class="fn">s</span>.name</span></span></span> <a href="../.././Init/Prelude.html#HAppend.hAppend">++</a> <span class="fn">&quot := &quot</span></span> <a href="../.././Init/Prelude.html#HAppend.hAppend">++</a> <span class="fn"><a href="../.././Init/Data/ToString/Basic.html#ToString.toString">toString</a> <span class="fn"><span class="fn">s</span>.val</span></span></span> <a href="../.././Init/Prelude.html#HAppend.hAppend">++</a> <span class="fn">&quot)&quot</span></span></span> }</span></span></li></ul></details></div></div><div class="decl" id="Lean.Elab.Term.throwInvalidNamedArg"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/ebc32af2e606deef0d7b437e67f24c20ed866818/src/Lean/Elab/App.lean#L33-L36">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../.././Lean/Elab/App.html#Lean.Elab.Term.throwInvalidNamedArg"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Term</span>.<span class="name">throwInvalidNamedArg</span></a></span><span class="impl_arg"><span class="decl_args">
<span class="fn">{α : <a href="../.././foundational_types.html">Type</a>}</span></span>
</span><span class="decl_args">
<span class="fn">(namedArg : <a href="../.././Lean/Elab/Arg.html#Lean.Elab.Term.NamedArg">Lean.Elab.Term.NamedArg</a>)</span></span>
<span class="decl_args">
<span class="fn">(fn? : <span class="fn"><a href="../.././Init/Prelude.html#Option">Option</a> <a href="../.././Init/Prelude.html#Lean.Name">Lean.Name</a></span>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../.././Lean/Elab/Term.html#Lean.Elab.Term.TermElabM">Lean.Elab.TermElabM</a> <span class="fn">α</span></span></div></div><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details></div></div><div class="decl" id="Lean.Elab.Term.synthesizeAppInstMVars"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/ebc32af2e606deef0d7b437e67f24c20ed866818/src/Lean/Elab/App.lean#L58-L62">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../.././Lean/Elab/App.html#Lean.Elab.Term.synthesizeAppInstMVars"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Term</span>.<span class="name">synthesizeAppInstMVars</span></a></span><span class="decl_args">
<span class="fn">(instMVars : <span class="fn"><a href="../.././Init/Prelude.html#Array">Array</a> <a href="../.././Lean/Expr.html#Lean.MVarId">Lean.MVarId</a></span>)</span></span>
<span class="decl_args">
<span class="fn">(app : <a href="../.././Lean/Expr.html#Lean.Expr">Lean.Expr</a>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../.././Lean/Elab/Term.html#Lean.Elab.Term.TermElabM">Lean.Elab.TermElabM</a> <a href="../.././Init/Prelude.html#Unit">Unit</a></span></div></div><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details></div></div><div class="decl" id="Lean.Elab.Term.eraseNamedArg"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/ebc32af2e606deef0d7b437e67f24c20ed866818/src/Lean/Elab/App.lean#L69-L70">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../.././Lean/Elab/App.html#Lean.Elab.Term.eraseNamedArg"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Term</span>.<span class="name">eraseNamedArg</span></a></span><span class="decl_args">
<span class="fn">(namedArgs : <span class="fn"><a href="../.././Init/Prelude.html#List">List</a> <a href="../.././Lean/Elab/Arg.html#Lean.Elab.Term.NamedArg">Lean.Elab.Term.NamedArg</a></span>)</span></span>
<span class="decl_args">
<span class="fn">(binderName : <a href="../.././Init/Prelude.html#Lean.Name">Lean.Name</a>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../.././Init/Prelude.html#List">List</a> <a href="../.././Lean/Elab/Arg.html#Lean.Elab.Term.NamedArg">Lean.Elab.Term.NamedArg</a></span></div></div><p>Erase entry for <code>binderName</code> from <code><a href="../.././Lean/Elab/App.html#Lean.Elab.Term.ElabAppArgs.State.namedArgs">namedArgs</a></code>.</p><details><summary>Equations</summary><ul class="equations"><li class="equation"><span class="fn"><span class="fn"><a href="../.././Lean/Elab/App.html#Lean.Elab.Term.eraseNamedArg">Lean.Elab.Term.eraseNamedArg</a> <span class="fn">namedArgs</span> <span class="fn">binderName</span></span> <a href="../.././Init/Prelude.html#Eq">=</a> <span class="fn"><a href="../.././Init/Data/List/Basic.html#List.filter">List.filter</a> (<span class="fn">fun <span class="fn">x</span> =&gt <span class="fn"><span class="fn"><span class="fn">x</span>.name</span> <a href="../.././Init/Core.html#bne">!=</a> <span class="fn">binderName</span></span></span>) <span class="fn">namedArgs</span></span></span></li></ul></details></div></div><div class="mod_doc"><h1 class="markdown-heading" id="Default-application-elaborator">Default application elaborator <a class="hover-link" href="#Default-application-elaborator">#</a></h1></div><div class="decl" id="Lean.Elab.Term.ElabAppArgs.Context"><div class="structure"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/ebc32af2e606deef0d7b437e67f24c20ed866818/src/Lean/Elab/App.lean#L83-L123">source</a></div><div class="decl_header"><span class="decl_kind">structure</span>
<span class="decl_name"><a class="break_within" href="../.././Lean/Elab/App.html#Lean.Elab.Term.ElabAppArgs.Context"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Term</span>.<span class="name">ElabAppArgs</span>.<span class="name">Context</span></a></span><span class="decl_args"> :</span><div class="decl_type"><a href="../.././foundational_types.html">Type</a></div></div><ul class="structure_fields" id="Lean.Elab.Term.ElabAppArgs.Context.mk"><li id="Lean.Elab.Term.ElabAppArgs.Context.ellipsis" class="structure_field"><div class="structure_field_doc"><p><code>true</code> if <code>..</code> was used</p></div><div class="structure_field_info">ellipsis : <a href="../.././Init/Prelude.html#Bool">Bool</a></div></li><li id="Lean.Elab.Term.ElabAppArgs.Context.explicit" class="structure_field"><div class="structure_field_doc"><p><code>true</code> if <code>@</code> modifier was used</p></div><div class="structure_field_info">explicit : <a href="../.././Init/Prelude.html#Bool">Bool</a></div></li><li id="Lean.Elab.Term.ElabAppArgs.Context.resultIsOutParamSupport" class="structure_field"><div class="structure_field_doc"><p>If the result type of an application is the <code><a href="../.././Init/Prelude.html#outParam">outParam</a></code> of some local instance, then special support may be needed
because type class resolution interacts poorly with coercions in this kind of situation.
This flag enables the special support.</p><p>The idea is quite simple, if the result type is the <code><a href="../.././Init/Prelude.html#outParam">outParam</a></code> of some local instance, we simply
execute <code>synthesizeSyntheticMVarsUsingDefault</code>. We added this feature to make sure examples as follows
are correctly elaborated.</p><pre><code class="language-lean">class <a href="../.././Init/Prelude.html#GetElem">GetElem</a> (Cont : Type u) (Idx : Type v) (Elem : <a href="../.././Init/Prelude.html#outParam">outParam</a> (Type w)) where
  getElem (xs : Cont) (i : Idx) : Elem

export <a href="../.././Init/Prelude.html#GetElem">GetElem</a> (getElem)

instance : <a href="../.././Init/Prelude.html#GetElem">GetElem</a> (Array α) <a href="../.././Init/Prelude.html#Nat">Nat</a> α where
  getElem xs i := xs.get ⟨i, sorry⟩

opaque <a href="../.././Lean/Elab/App.html#Lean.Elab.Term.ElabAppArgs.State.f">f</a> : <a href="../.././Init/Prelude.html#Option">Option</a> <a href="../.././Init/Prelude.html#Bool">Bool</a> → <a href="../.././Init/Prelude.html#Bool">Bool</a>
opaque g : <a href="../.././Init/Prelude.html#Bool">Bool</a> → <a href="../.././Init/Prelude.html#Bool">Bool</a>

def bad (xs : <a href="../.././Init/Prelude.html#Array">Array</a> Bool) : <a href="../.././Init/Prelude.html#Bool">Bool</a> :=
  let x := getElem xs 0
  <a href="../.././Lean/Elab/App.html#Lean.Elab.Term.ElabAppArgs.State.f">f</a> x && g x
</code></pre><p>Without the special support, Lean fails at <code>g x</code> saying <code>x</code> has type <code><a href="../.././Init/Prelude.html#Option">Option</a> <a href="../.././Init/Prelude.html#Bool">Bool</a></code> but is expected to have type <code><a href="../.././Init/Prelude.html#Bool">Bool</a></code>.
From the user's point of view this is a bug, since <code>let x := getElem xs 0</code> clearly constrains <code>x</code> to be <code><a href="../.././Init/Prelude.html#Bool">Bool</a></code>, but
we only obtain this information after we apply the <code><a href="../.././Init/Prelude.html#OfNat">OfNat</a></code> default instance for <code>0</code>.</p><p>Before converging to this solution, we have tried to create a "coercion placeholder" when <code><a href="../.././Lean/Elab/App.html#Lean.Elab.Term.ElabAppArgs.Context.resultIsOutParamSupport">resultIsOutParamSupport</a> = true</code>,
but it did not work well in practice. For example, it failed in the example above.</p></div><div class="structure_field_info">resultIsOutParamSupport : <a href="../.././Init/Prelude.html#Bool">Bool</a></div></li></ul><details class="instances"><summary>Instances For</summary><ul id="instances-for-list-Lean.Elab.Term.ElabAppArgs.Context" class="instances-for-list"></ul></details></div></div><div class="decl" id="Lean.Elab.Term.ElabAppArgs.State"><div class="structure"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/ebc32af2e606deef0d7b437e67f24c20ed866818/src/Lean/Elab/App.lean#L126-L159">source</a></div><div class="decl_header"><span class="decl_kind">structure</span>
<span class="decl_name"><a class="break_within" href="../.././Lean/Elab/App.html#Lean.Elab.Term.ElabAppArgs.State"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Term</span>.<span class="name">ElabAppArgs</span>.<span class="name">State</span></a></span><span class="decl_args"> :</span><div class="decl_type"><a href="../.././foundational_types.html">Type</a></div></div><ul class="structure_fields" id="Lean.Elab.Term.ElabAppArgs.State.mk"><li id="Lean.Elab.Term.ElabAppArgs.State.f" class="structure_field"><div class="structure_field_info">f : <a href="../.././Lean/Expr.html#Lean.Expr">Lean.Expr</a></div></li><li id="Lean.Elab.Term.ElabAppArgs.State.fType" class="structure_field"><div class="structure_field_info">fType : <a href="../.././Lean/Expr.html#Lean.Expr">Lean.Expr</a></div></li><li id="Lean.Elab.Term.ElabAppArgs.State.args" class="structure_field"><div class="structure_field_doc"><p>Remaining regular arguments.</p></div><div class="structure_field_info">args : <span class="fn"><a href="../.././Init/Prelude.html#List">List</a> <a href="../.././Lean/Elab/Arg.html#Lean.Elab.Term.Arg">Lean.Elab.Term.Arg</a></span></div></li><li id="Lean.Elab.Term.ElabAppArgs.State.namedArgs" class="structure_field"><div class="structure_field_doc"><p>remaining named arguments to be processed.</p></div><div class="structure_field_info">namedArgs : <span class="fn"><a href="../.././Init/Prelude.html#List">List</a> <a href="../.././Lean/Elab/Arg.html#Lean.Elab.Term.NamedArg">Lean.Elab.Term.NamedArg</a></span></div></li><li id="Lean.Elab.Term.ElabAppArgs.State.expectedType?" class="structure_field"><div class="structure_field_info">expectedType? : <span class="fn"><a href="../.././Init/Prelude.html#Option">Option</a> <a href="../.././Lean/Expr.html#Lean.Expr">Lean.Expr</a></span></div></li><li id="Lean.Elab.Term.ElabAppArgs.State.etaArgs" class="structure_field"><div class="structure_field_doc"><p>When named arguments are provided and explicit arguments occurring before them are missing,
the elaborator eta-expands the declaration. For example,</p><pre><code>def <a href="../.././Lean/Elab/App.html#Lean.Elab.Term.ElabAppArgs.State.f">f</a> (x y : Nat) := x + y
#check <a href="../.././Lean/Elab/App.html#Lean.Elab.Term.ElabAppArgs.State.f">f</a> (y := 5)
-- fun x => <a href="../.././Lean/Elab/App.html#Lean.Elab.Term.ElabAppArgs.State.f">f</a> x 5
</code></pre><p><code><a href="../.././Lean/Elab/App.html#Lean.Elab.Term.ElabAppArgs.State.etaArgs">etaArgs</a></code> stores the fresh free variables for implementing the eta-expansion.
When <code>..</code> is used, eta-expansion is disabled, and missing arguments are treated as <code>_</code>.</p></div><div class="structure_field_info">etaArgs : <span class="fn"><a href="../.././Init/Prelude.html#Array">Array</a> <a href="../.././Lean/Expr.html#Lean.Expr">Lean.Expr</a></span></div></li><li id="Lean.Elab.Term.ElabAppArgs.State.toSetErrorCtx" class="structure_field"><div class="structure_field_doc"><p>Metavariables that we need to set the error context using the application being built.</p></div><div class="structure_field_info">toSetErrorCtx : <span class="fn"><a href="../.././Init/Prelude.html#Array">Array</a> <a href="../.././Lean/Expr.html#Lean.MVarId">Lean.MVarId</a></span></div></li><li id="Lean.Elab.Term.ElabAppArgs.State.instMVars" class="structure_field"><div class="structure_field_doc"><p>Metavariables for the instance implicit arguments that have already been processed.</p></div><div class="structure_field_info">instMVars : <span class="fn"><a href="../.././Init/Prelude.html#Array">Array</a> <a href="../.././Lean/Expr.html#Lean.MVarId">Lean.MVarId</a></span></div></li><li id="Lean.Elab.Term.ElabAppArgs.State.propagateExpected" class="structure_field"><div class="structure_field_doc"><p>The following field is used to implement the <code>propagateExpectedType</code> heuristic.
It is set to <code>true</code> true when <code><a href="../.././Lean/Elab/App.html#Lean.Elab.Term.ElabElim.Context.expectedType">expectedType</a></code> still has to be propagated.</p></div><div class="structure_field_info">propagateExpected : <a href="../.././Init/Prelude.html#Bool">Bool</a></div></li><li id="Lean.Elab.Term.ElabAppArgs.State.resultTypeOutParam?" class="structure_field"><div class="structure_field_doc"><p>If the result type may be the <code><a href="../.././Init/Prelude.html#outParam">outParam</a></code> of some local instance.
See comment at <code><a href="../.././Lean/Elab/App.html#Lean.Elab.Term.ElabAppArgs.Context.resultIsOutParamSupport">Context.resultIsOutParamSupport</a></code></p></div><div class="structure_field_info">resultTypeOutParam? : <span class="fn"><a href="../.././Init/Prelude.html#Option">Option</a> <a href="../.././Lean/Expr.html#Lean.MVarId">Lean.MVarId</a></span></div></li></ul><p>Auxiliary structure for elaborating the application <code><a href="../.././Lean/Elab/App.html#Lean.Elab.Term.ElabAppArgs.State.f">f</a> <a href="../.././Lean/Elab/App.html#Lean.Elab.Term.ElabAppArgs.State.args">args</a> <a href="../.././Lean/Elab/App.html#Lean.Elab.Term.ElabAppArgs.State.namedArgs">namedArgs</a></code>.</p><details class="instances"><summary>Instances For</summary><ul id="instances-for-list-Lean.Elab.Term.ElabAppArgs.State" class="instances-for-list"></ul></details></div></div><div class="decl" id="Lean.Elab.Term.ElabAppArgs.M"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/ebc32af2e606deef0d7b437e67f24c20ed866818/src/Lean/Elab/App.lean#L161-L161">source</a></div><div class="attributes">@[inline]</div>
<div class="decl_header"><span class="decl_kind">abbrev</span>
<span class="decl_name"><a class="break_within" href="../.././Lean/Elab/App.html#Lean.Elab.Term.ElabAppArgs.M"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Term</span>.<span class="name">ElabAppArgs</span>.<span class="name">M</span></a></span><span class="decl_args">
<span class="fn">(α : <a href="../.././foundational_types.html">Type</a>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><a href="../.././foundational_types.html">Type</a></div></div><details><summary>Equations</summary><ul class="equations"><li class="equation"><span class="fn"><a href="../.././Lean/Elab/App.html#Lean.Elab.Term.ElabAppArgs.M">Lean.Elab.Term.ElabAppArgs.M</a> <a href="../.././Init/Prelude.html#Eq">=</a>   <span class="fn"><a href="../.././Init/Prelude.html#ReaderT">ReaderT</a> <a href="../.././Lean/Elab/App.html#Lean.Elab.Term.ElabAppArgs.Context">Lean.Elab.Term.ElabAppArgs.Context</a>
    (<span class="fn"><a href="../.././Init/Control/StateRef.html#StateRefT'">StateRefT'</a> <a href="../.././Init/System/IO.html#IO.RealWorld">IO.RealWorld</a> <a href="../.././Lean/Elab/App.html#Lean.Elab.Term.ElabAppArgs.State">Lean.Elab.Term.ElabAppArgs.State</a> <a href="../.././Lean/Elab/Term.html#Lean.Elab.Term.TermElabM">Lean.Elab.TermElabM</a></span>)</span></span></li></ul></details></div></div><div class="decl" id="Lean.Elab.Term.ElabAppArgs.trySynthesizeAppInstMVars"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/ebc32af2e606deef0d7b437e67f24c20ed866818/src/Lean/Elab/App.lean#L174-L181">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../.././Lean/Elab/App.html#Lean.Elab.Term.ElabAppArgs.trySynthesizeAppInstMVars"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Term</span>.<span class="name">ElabAppArgs</span>.<span class="name">trySynthesizeAppInstMVars</span></a></span><span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../.././Lean/Elab/App.html#Lean.Elab.Term.ElabAppArgs.M">Lean.Elab.Term.ElabAppArgs.M</a> <a href="../.././Init/Prelude.html#Unit">Unit</a></span></div></div><p>Try to synthesize metavariables are <code><a href="../.././Lean/Elab/App.html#Lean.Elab.Term.ElabAppArgs.State.instMVars">instMVars</a></code> using type class resolution.
The ones that cannot be synthesized yet stay in the <code><a href="../.././Lean/Elab/App.html#Lean.Elab.Term.ElabAppArgs.State.instMVars">instMVars</a></code> list.
Remark: we use this method</p><ul>
<li>before trying to apply coercions to function,</li>
<li>before unifying the expected type.</li>
</ul><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details></div></div><div class="decl" id="Lean.Elab.Term.ElabAppArgs.synthesizeAppInstMVars"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/ebc32af2e606deef0d7b437e67f24c20ed866818/src/Lean/Elab/App.lean#L187-L189">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../.././Lean/Elab/App.html#Lean.Elab.Term.ElabAppArgs.synthesizeAppInstMVars"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Term</span>.<span class="name">ElabAppArgs</span>.<span class="name">synthesizeAppInstMVars</span></a></span><span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../.././Lean/Elab/App.html#Lean.Elab.Term.ElabAppArgs.M">Lean.Elab.Term.ElabAppArgs.M</a> <a href="../.././Init/Prelude.html#Unit">Unit</a></span></div></div><p>Try to synthesize metavariables are <code><a href="../.././Lean/Elab/App.html#Lean.Elab.Term.ElabAppArgs.State.instMVars">instMVars</a></code> using type class resolution.
The ones that cannot be synthesized yet are registered.</p><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details></div></div><div class="decl" id="Lean.Elab.Term.ElabAppArgs.eraseNamedArg"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/ebc32af2e606deef0d7b437e67f24c20ed866818/src/Lean/Elab/App.lean#L226-L227">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../.././Lean/Elab/App.html#Lean.Elab.Term.ElabAppArgs.eraseNamedArg"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Term</span>.<span class="name">ElabAppArgs</span>.<span class="name">eraseNamedArg</span></a></span><span class="decl_args">
<span class="fn">(binderName : <a href="../.././Init/Prelude.html#Lean.Name">Lean.Name</a>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../.././Lean/Elab/App.html#Lean.Elab.Term.ElabAppArgs.M">Lean.Elab.Term.ElabAppArgs.M</a> <a href="../.././Init/Prelude.html#Unit">Unit</a></span></div></div><p>Remove named argument with name <code>binderName</code> from <code><a href="../.././Lean/Elab/App.html#Lean.Elab.Term.ElabAppArgs.State.namedArgs">namedArgs</a></code>.</p><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details></div></div><div class="decl" id="Lean.Elab.Term.ElabAppArgs.main"><div class="opaque"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/ebc32af2e606deef0d7b437e67f24c20ed866818/src/Lean/Elab/App.lean#L654-L676">source</a></div><div class="decl_header"><span class="decl_kind">partial def</span>
<span class="decl_name"><a class="break_within" href="../.././Lean/Elab/App.html#Lean.Elab.Term.ElabAppArgs.main"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Term</span>.<span class="name">ElabAppArgs</span>.<span class="name">main</span></a></span><span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../.././Lean/Elab/App.html#Lean.Elab.Term.ElabAppArgs.M">Lean.Elab.Term.ElabAppArgs.M</a> <a href="../.././Lean/Expr.html#Lean.Expr">Lean.Expr</a></span></div></div><p>Elaborate function application arguments.</p></div></div><div class="decl" id="Lean.Elab.Term.elabAsElim"><div class="opaque"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/ebc32af2e606deef0d7b437e67f24c20ed866818/src/Lean/Elab/App.lean#L682-L697">source</a></div><div class="decl_header"><span class="decl_kind">opaque</span>
<span class="decl_name"><a class="break_within" href="../.././Lean/Elab/App.html#Lean.Elab.Term.elabAsElim"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Term</span>.<span class="name">elabAsElim</span></a></span><span class="decl_args"> :</span><div class="decl_type"><a href="../.././Lean/Attributes.html#Lean.TagAttribute">Lean.TagAttribute</a></div></div></div></div><div class="mod_doc"><h1 class="markdown-heading" id="Eliminator-like-function-application-elaborator">Eliminator-like function application elaborator <a class="hover-link" href="#Eliminator-like-function-application-elaborator">#</a></h1></div><div class="decl" id="Lean.Elab.Term.ElabElim.Context"><div class="structure"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/ebc32af2e606deef0d7b437e67f24c20ed866818/src/Lean/Elab/App.lean#L703-L716">source</a></div><div class="decl_header"><span class="decl_kind">structure</span>
<span class="decl_name"><a class="break_within" href="../.././Lean/Elab/App.html#Lean.Elab.Term.ElabElim.Context"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Term</span>.<span class="name">ElabElim</span>.<span class="name">Context</span></a></span><span class="decl_args"> :</span><div class="decl_type"><a href="../.././foundational_types.html">Type</a></div></div><ul class="structure_fields" id="Lean.Elab.Term.ElabElim.Context.mk"><li id="Lean.Elab.Term.ElabElim.Context.elimInfo" class="structure_field"><div class="structure_field_info">elimInfo : <a href="../.././Lean/Meta/Tactic/ElimInfo.html#Lean.Meta.ElimInfo">Lean.Meta.ElimInfo</a></div></li><li id="Lean.Elab.Term.ElabElim.Context.expectedType" class="structure_field"><div class="structure_field_info">expectedType : <a href="../.././Lean/Expr.html#Lean.Expr">Lean.Expr</a></div></li><li id="Lean.Elab.Term.ElabElim.Context.extraArgsPos" class="structure_field"><div class="structure_field_doc"><p>Position of additional arguments that should be elaborated eagerly
because they can contribute to the motive inference procedure.
For example, in the following theorem the argument <code>h : a = b</code>
should be elaborated eagerly because it contains <code>b</code> which occurs
in <code>motive b</code>.</p><pre><code>theorem Eq.subst' {α} {motive : α → Prop} {a b : α} (h : a = b) : motive a → motive b
</code></pre></div><div class="structure_field_info">extraArgsPos : <span class="fn"><a href="../.././Init/Prelude.html#Array">Array</a> <a href="../.././Init/Prelude.html#Nat">Nat</a></span></div></li></ul><p>Context of the <code>elab_as_elim</code> elaboration procedure.</p><details class="instances"><summary>Instances For</summary><ul id="instances-for-list-Lean.Elab.Term.ElabElim.Context" class="instances-for-list"></ul></details></div></div><div class="decl" id="Lean.Elab.Term.ElabElim.State"><div class="structure"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/ebc32af2e606deef0d7b437e67f24c20ed866818/src/Lean/Elab/App.lean#L719-L735">source</a></div><div class="decl_header"><span class="decl_kind">structure</span>
<span class="decl_name"><a class="break_within" href="../.././Lean/Elab/App.html#Lean.Elab.Term.ElabElim.State"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Term</span>.<span class="name">ElabElim</span>.<span class="name">State</span></a></span><span class="decl_args"> :</span><div class="decl_type"><a href="../.././foundational_types.html">Type</a></div></div><ul class="structure_fields" id="Lean.Elab.Term.ElabElim.State.mk"><li id="Lean.Elab.Term.ElabElim.State.f" class="structure_field"><div class="structure_field_doc"><p>The resultant expression being built.</p></div><div class="structure_field_info">f : <a href="../.././Lean/Expr.html#Lean.Expr">Lean.Expr</a></div></li><li id="Lean.Elab.Term.ElabElim.State.fType" class="structure_field"><div class="structure_field_doc"><p>`f : fType</p></div><div class="structure_field_info">fType : <a href="../.././Lean/Expr.html#Lean.Expr">Lean.Expr</a></div></li><li id="Lean.Elab.Term.ElabElim.State.namedArgs" class="structure_field"><div class="structure_field_doc"><p>User-provided named arguments that still have to be processed.</p></div><div class="structure_field_info">namedArgs : <span class="fn"><a href="../.././Init/Prelude.html#List">List</a> <a href="../.././Lean/Elab/Arg.html#Lean.Elab.Term.NamedArg">Lean.Elab.Term.NamedArg</a></span></div></li><li id="Lean.Elab.Term.ElabElim.State.args" class="structure_field"><div class="structure_field_doc"><p>User-provided arguments that still have to be processed.</p></div><div class="structure_field_info">args : <span class="fn"><a href="../.././Init/Prelude.html#List">List</a> <a href="../.././Lean/Elab/Arg.html#Lean.Elab.Term.Arg">Lean.Elab.Term.Arg</a></span></div></li><li id="Lean.Elab.Term.ElabElim.State.discrs" class="structure_field"><div class="structure_field_doc"><p>Discriminants processed so far.</p></div><div class="structure_field_info">discrs : <span class="fn"><a href="../.././Init/Prelude.html#Array">Array</a> <a href="../.././Lean/Expr.html#Lean.Expr">Lean.Expr</a></span></div></li><li id="Lean.Elab.Term.ElabElim.State.instMVars" class="structure_field"><div class="structure_field_doc"><p>Instance implicit arguments collected so far.</p></div><div class="structure_field_info">instMVars : <span class="fn"><a href="../.././Init/Prelude.html#Array">Array</a> <a href="../.././Lean/Expr.html#Lean.MVarId">Lean.MVarId</a></span></div></li><li id="Lean.Elab.Term.ElabElim.State.idx" class="structure_field"><div class="structure_field_doc"><p>Position of the next argument to be processed. We use it to decide whether the argument is the motive or a discriminant.</p></div><div class="structure_field_info">idx : <a href="../.././Init/Prelude.html#Nat">Nat</a></div></li><li id="Lean.Elab.Term.ElabElim.State.motive?" class="structure_field"><div class="structure_field_doc"><p>Store the metavariable used to represent the motive that will be computed at <code><a href="../.././Lean/Elab/App.html#Lean.Elab.Term.ElabElim.finalize">finalize</a></code>.</p></div><div class="structure_field_info">motive? : <span class="fn"><a href="../.././Init/Prelude.html#Option">Option</a> <a href="../.././Lean/Expr.html#Lean.Expr">Lean.Expr</a></span></div></li></ul><p>State of the <code>elab_as_elim</code> elaboration procedure.</p><details class="instances"><summary>Instances For</summary><ul id="instances-for-list-Lean.Elab.Term.ElabElim.State" class="instances-for-list"></ul></details></div></div><div class="decl" id="Lean.Elab.Term.ElabElim.M"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/ebc32af2e606deef0d7b437e67f24c20ed866818/src/Lean/Elab/App.lean#L737-L737">source</a></div><div class="attributes">@[inline]</div>
<div class="decl_header"><span class="decl_kind">abbrev</span>
<span class="decl_name"><a class="break_within" href="../.././Lean/Elab/App.html#Lean.Elab.Term.ElabElim.M"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Term</span>.<span class="name">ElabElim</span>.<span class="name">M</span></a></span><span class="decl_args">
<span class="fn">(α : <a href="../.././foundational_types.html">Type</a>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><a href="../.././foundational_types.html">Type</a></div></div><details><summary>Equations</summary><ul class="equations"><li class="equation"><span class="fn"><a href="../.././Lean/Elab/App.html#Lean.Elab.Term.ElabElim.M">Lean.Elab.Term.ElabElim.M</a> <a href="../.././Init/Prelude.html#Eq">=</a>   <span class="fn"><a href="../.././Init/Prelude.html#ReaderT">ReaderT</a> <a href="../.././Lean/Elab/App.html#Lean.Elab.Term.ElabElim.Context">Lean.Elab.Term.ElabElim.Context</a> (<span class="fn"><a href="../.././Init/Control/StateRef.html#StateRefT'">StateRefT'</a> <a href="../.././Init/System/IO.html#IO.RealWorld">IO.RealWorld</a> <a href="../.././Lean/Elab/App.html#Lean.Elab.Term.ElabElim.State">Lean.Elab.Term.ElabElim.State</a> <a href="../.././Lean/Elab/Term.html#Lean.Elab.Term.TermElabM">Lean.Elab.TermElabM</a></span>)</span></span></li></ul></details></div></div><div class="decl" id="Lean.Elab.Term.ElabElim.mkMotive"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/ebc32af2e606deef0d7b437e67f24c20ed866818/src/Lean/Elab/App.lean#L740-L746">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../.././Lean/Elab/App.html#Lean.Elab.Term.ElabElim.mkMotive"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Term</span>.<span class="name">ElabElim</span>.<span class="name">mkMotive</span></a></span><span class="decl_args">
<span class="fn">(discrs : <span class="fn"><a href="../.././Init/Prelude.html#Array">Array</a> <a href="../.././Lean/Expr.html#Lean.Expr">Lean.Expr</a></span>)</span></span>
<span class="decl_args">
<span class="fn">(expectedType : <a href="../.././Lean/Expr.html#Lean.Expr">Lean.Expr</a>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../.././Lean/Meta/Basic.html#Lean.Meta.MetaM">Lean.MetaM</a> <a href="../.././Lean/Expr.html#Lean.Expr">Lean.Expr</a></span></div></div><p>Infer the <code>motive</code> using the expected type by <code>kabstract</code>ing the discriminants.</p><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details></div></div><div class="decl" id="Lean.Elab.Term.ElabElim.revertArgs"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/ebc32af2e606deef0d7b437e67f24c20ed866818/src/Lean/Elab/App.lean#L749-L759">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../.././Lean/Elab/App.html#Lean.Elab.Term.ElabElim.revertArgs"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Term</span>.<span class="name">ElabElim</span>.<span class="name">revertArgs</span></a></span><span class="decl_args">
<span class="fn">(args : <span class="fn"><a href="../.././Init/Prelude.html#List">List</a> <a href="../.././Lean/Elab/Arg.html#Lean.Elab.Term.Arg">Lean.Elab.Term.Arg</a></span>)</span></span>
<span class="decl_args">
<span class="fn">(f : <a href="../.././Lean/Expr.html#Lean.Expr">Lean.Expr</a>)</span></span>
<span class="decl_args">
<span class="fn">(expectedType : <a href="../.././Lean/Expr.html#Lean.Expr">Lean.Expr</a>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../.././Lean/Elab/Term.html#Lean.Elab.Term.TermElabM">Lean.Elab.TermElabM</a> (<span class="fn"><a href="../.././Lean/Expr.html#Lean.Expr">Lean.Expr</a> <a href="../.././Init/Prelude.html#Prod">×</a> <a href="../.././Lean/Expr.html#Lean.Expr">Lean.Expr</a></span>)</span></div></div><p>If the eliminator is over-applied, we "revert" the extra arguments.</p><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details></div></div><div class="decl" id="Lean.Elab.Term.ElabElim.finalize"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/ebc32af2e606deef0d7b437e67f24c20ed866818/src/Lean/Elab/App.lean#L765-L794">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../.././Lean/Elab/App.html#Lean.Elab.Term.ElabElim.finalize"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Term</span>.<span class="name">ElabElim</span>.<span class="name">finalize</span></a></span><span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../.././Lean/Elab/App.html#Lean.Elab.Term.ElabElim.M">Lean.Elab.Term.ElabElim.M</a> <a href="../.././Lean/Expr.html#Lean.Expr">Lean.Expr</a></span></div></div><p>Construct the resulting application after all discriminants have bee elaborated, and we have
consumed as many given arguments as possible.</p><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details></div></div><div class="decl" id="Lean.Elab.Term.ElabElim.getNextArg?"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/ebc32af2e606deef0d7b437e67f24c20ed866818/src/Lean/Elab/App.lean#L801-L814">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../.././Lean/Elab/App.html#Lean.Elab.Term.ElabElim.getNextArg?"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Term</span>.<span class="name">ElabElim</span>.<span class="name">getNextArg?</span></a></span><span class="decl_args">
<span class="fn">(binderName : <a href="../.././Init/Prelude.html#Lean.Name">Lean.Name</a>)</span></span>
<span class="decl_args">
<span class="fn">(binderInfo : <a href="../.././Lean/Expr.html#Lean.BinderInfo">Lean.BinderInfo</a>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../.././Lean/Elab/App.html#Lean.Elab.Term.ElabElim.M">Lean.Elab.Term.ElabElim.M</a> (<span class="fn"><a href="../.././Lean/Data/LOption.html#Lean.LOption">Lean.LOption</a> <a href="../.././Lean/Elab/Arg.html#Lean.Elab.Term.Arg">Lean.Elab.Term.Arg</a></span>)</span></div></div><p>Return the next argument to be processed.
The result is <code>.none</code> if it is an implicit argument which was not provided using a named argument.
The result is <code>.undef</code> if <code><a href="../.././Lean/Elab/App.html#Lean.Elab.Term.ElabAppArgs.State.args">args</a></code> is empty and <code><a href="../.././Lean/Elab/App.html#Lean.Elab.Term.ElabAppArgs.State.namedArgs">namedArgs</a></code> does contain an entry for <code>binderName</code>.</p><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details></div></div><div class="decl" id="Lean.Elab.Term.ElabElim.setMotive"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/ebc32af2e606deef0d7b437e67f24c20ed866818/src/Lean/Elab/App.lean#L817-L818">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../.././Lean/Elab/App.html#Lean.Elab.Term.ElabElim.setMotive"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Term</span>.<span class="name">ElabElim</span>.<span class="name">setMotive</span></a></span><span class="decl_args">
<span class="fn">(motive : <a href="../.././Lean/Expr.html#Lean.Expr">Lean.Expr</a>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../.././Lean/Elab/App.html#Lean.Elab.Term.ElabElim.M">Lean.Elab.Term.ElabElim.M</a> <a href="../.././Init/Prelude.html#Unit">Unit</a></span></div></div><p>Set the <code>motive</code> field in the state.</p><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details></div></div><div class="decl" id="Lean.Elab.Term.ElabElim.addDiscr"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/ebc32af2e606deef0d7b437e67f24c20ed866818/src/Lean/Elab/App.lean#L821-L822">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../.././Lean/Elab/App.html#Lean.Elab.Term.ElabElim.addDiscr"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Term</span>.<span class="name">ElabElim</span>.<span class="name">addDiscr</span></a></span><span class="decl_args">
<span class="fn">(discr : <a href="../.././Lean/Expr.html#Lean.Expr">Lean.Expr</a>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../.././Lean/Elab/App.html#Lean.Elab.Term.ElabElim.M">Lean.Elab.Term.ElabElim.M</a> <a href="../.././Init/Prelude.html#Unit">Unit</a></span></div></div><p>Push the given expression into the <code><a href="../.././Lean/Elab/App.html#Lean.Elab.Term.ElabElim.State.discrs">discrs</a></code> field in the state.</p><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details></div></div><div class="decl" id="Lean.Elab.Term.ElabElim.saveArgInfo"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/ebc32af2e606deef0d7b437e67f24c20ed866818/src/Lean/Elab/App.lean#L833-L837">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../.././Lean/Elab/App.html#Lean.Elab.Term.ElabElim.saveArgInfo"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Term</span>.<span class="name">ElabElim</span>.<span class="name">saveArgInfo</span></a></span><span class="decl_args">
<span class="fn">(arg : <a href="../.././Lean/Expr.html#Lean.Expr">Lean.Expr</a>)</span></span>
<span class="decl_args">
<span class="fn">(binderName : <a href="../.././Init/Prelude.html#Lean.Name">Lean.Name</a>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../.././Lean/Elab/App.html#Lean.Elab.Term.ElabElim.M">Lean.Elab.Term.ElabElim.M</a> <a href="../.././Init/Prelude.html#Unit">Unit</a></span></div></div><p>Save information for producing error messages.</p><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details></div></div><div class="decl" id="Lean.Elab.Term.ElabElim.mkImplicitArg"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/ebc32af2e606deef0d7b437e67f24c20ed866818/src/Lean/Elab/App.lean#L840-L844">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../.././Lean/Elab/App.html#Lean.Elab.Term.ElabElim.mkImplicitArg"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Term</span>.<span class="name">ElabElim</span>.<span class="name">mkImplicitArg</span></a></span><span class="decl_args">
<span class="fn">(argExpectedType : <a href="../.././Lean/Expr.html#Lean.Expr">Lean.Expr</a>)</span></span>
<span class="decl_args">
<span class="fn">(bi : <a href="../.././Lean/Expr.html#Lean.BinderInfo">Lean.BinderInfo</a>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../.././Lean/Elab/App.html#Lean.Elab.Term.ElabElim.M">Lean.Elab.Term.ElabElim.M</a> <a href="../.././Lean/Expr.html#Lean.Expr">Lean.Expr</a></span></div></div><p>Create an implicit argument using the given <code>BinderInfo</code>.</p><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details></div></div><div class="decl" id="Lean.Elab.Term.ElabElim.main"><div class="opaque"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/ebc32af2e606deef0d7b437e67f24c20ed866818/src/Lean/Elab/App.lean#L847-L873">source</a></div><div class="decl_header"><span class="decl_kind">partial def</span>
<span class="decl_name"><a class="break_within" href="../.././Lean/Elab/App.html#Lean.Elab.Term.ElabElim.main"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Term</span>.<span class="name">ElabElim</span>.<span class="name">main</span></a></span><span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../.././Lean/Elab/App.html#Lean.Elab.Term.ElabElim.M">Lean.Elab.Term.ElabElim.M</a> <a href="../.././Lean/Expr.html#Lean.Expr">Lean.Expr</a></span></div></div><p>Main loop of the <code>elimAsElab</code> procedure.</p></div></div><div class="mod_doc"><h1 class="markdown-heading" id="Function-application-elaboration">Function application elaboration <a class="hover-link" href="#Function-application-elaboration">#</a></h1></div><div class="decl" id="Lean.Elab.Term.elabAppArgs"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/ebc32af2e606deef0d7b437e67f24c20ed866818/src/Lean/Elab/App.lean#L907-L980">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../.././Lean/Elab/App.html#Lean.Elab.Term.elabAppArgs"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Term</span>.<span class="name">elabAppArgs</span></a></span><span class="decl_args">
<span class="fn">(f : <a href="../.././Lean/Expr.html#Lean.Expr">Lean.Expr</a>)</span></span>
<span class="decl_args">
<span class="fn">(namedArgs : <span class="fn"><a href="../.././Init/Prelude.html#Array">Array</a> <a href="../.././Lean/Elab/Arg.html#Lean.Elab.Term.NamedArg">Lean.Elab.Term.NamedArg</a></span>)</span></span>
<span class="decl_args">
<span class="fn">(args : <span class="fn"><a href="../.././Init/Prelude.html#Array">Array</a> <a href="../.././Lean/Elab/Arg.html#Lean.Elab.Term.Arg">Lean.Elab.Term.Arg</a></span>)</span></span>
<span class="decl_args">
<span class="fn">(expectedType? : <span class="fn"><a href="../.././Init/Prelude.html#Option">Option</a> <a href="../.././Lean/Expr.html#Lean.Expr">Lean.Expr</a></span>)</span></span>
<span class="decl_args">
<span class="fn">(explicit : <a href="../.././Init/Prelude.html#Bool">Bool</a>)</span></span>
<span class="decl_args">
<span class="fn">(ellipsis : <a href="../.././Init/Prelude.html#Bool">Bool</a>)</span></span>
<span class="decl_args">
<span class="fn">(resultIsOutParamSupport : <span class="fn"><a href="../.././Init/Prelude.html#optParam">optParam</a> <a href="../.././Init/Prelude.html#Bool">Bool</a> <a href="../.././Init/Prelude.html#Bool.true">true</a></span>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../.././Lean/Elab/Term.html#Lean.Elab.Term.TermElabM">Lean.Elab.TermElabM</a> <a href="../.././Lean/Expr.html#Lean.Expr">Lean.Expr</a></span></div></div><p>Elaborate a <code><a href="../.././Lean/Elab/App.html#Lean.Elab.Term.ElabAppArgs.State.f">f</a></code>-application using <code><a href="../.././Lean/Elab/App.html#Lean.Elab.Term.ElabAppArgs.State.namedArgs">namedArgs</a></code> and <code><a href="../.././Lean/Elab/App.html#Lean.Elab.Term.ElabAppArgs.State.args">args</a></code> as the arguments.</p><ul>
<li><code><a href="../.././Lean/Elab/App.html#Lean.Elab.Term.ElabAppArgs.State.expectedType?">expectedType?</a></code> the expected type if available. It is used to propagate typing information only. This method does <strong>not</strong> ensure the result has this type.</li>
<li><code><a href="../.././Lean/Elab/App.html#Lean.Elab.Term.ElabAppArgs.Context.explicit">explicit</a> = true</code> when notation <code>@</code> is used, and implicit arguments are assumed to be provided at <code><a href="../.././Lean/Elab/App.html#Lean.Elab.Term.ElabAppArgs.State.namedArgs">namedArgs</a></code> and <code><a href="../.././Lean/Elab/App.html#Lean.Elab.Term.ElabAppArgs.State.args">args</a></code>.</li>
<li><code><a href="../.././Lean/Elab/App.html#Lean.Elab.Term.ElabAppArgs.Context.ellipsis">ellipsis</a> = true</code> when notation <code>..</code> is used. That is, we add <code>_</code> for missing arguments.</li>
<li><code><a href="../.././Lean/Elab/App.html#Lean.Elab.Term.ElabAppArgs.Context.resultIsOutParamSupport">resultIsOutParamSupport</a></code> is used to control whether special support is used when processing applications of functions that return
output parameter of some local instance. Example:
<pre><code><a href="../.././Init/Prelude.html#GetElem.getElem">GetElem.getElem</a> : {Cont : Type u_1} → {Idx : Type u_2} → {elem : Type u_3} → {dom : cont → <a href="../.././Lean/Elab/App.html#Lean.Elab.Term.ElabElim.State.idx">idx</a> → Prop} → [self : <a href="../.././Init/Prelude.html#GetElem">GetElem</a> cont <a href="../.././Lean/Elab/App.html#Lean.Elab.Term.ElabElim.State.idx">idx</a> elem dom] → (xs : cont) → (i : idx) → dom xs i → elem
</code></pre>
The result type <code>elem</code> is the output parameter of the local instance <code>self</code>.
When this parameter is set to <code>true</code>, we execute <code>synthesizeSyntheticMVarsUsingDefault</code>. For additional details, see comment at
<code>ElabAppArgs.resultIsOutParam</code>.</li>
</ul><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details></div></div><div class="decl" id="Lean.Elab.Term.elabAppArgs.elabAsElim?"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/ebc32af2e606deef0d7b437e67f24c20ed866818/src/Lean/Elab/App.lean#L939-L953">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../.././Lean/Elab/App.html#Lean.Elab.Term.elabAppArgs.elabAsElim?"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Term</span>.<span class="name">elabAppArgs</span>.<span class="name">elabAsElim?</span></a></span><span class="decl_args">
<span class="fn">(f : <a href="../.././Lean/Expr.html#Lean.Expr">Lean.Expr</a>)</span></span>
<span class="decl_args">
<span class="fn">(namedArgs : <span class="fn"><a href="../.././Init/Prelude.html#Array">Array</a> <a href="../.././Lean/Elab/Arg.html#Lean.Elab.Term.NamedArg">Lean.Elab.Term.NamedArg</a></span>)</span></span>
<span class="decl_args">
<span class="fn">(explicit : <a href="../.././Init/Prelude.html#Bool">Bool</a>)</span></span>
<span class="decl_args">
<span class="fn">(ellipsis : <a href="../.././Init/Prelude.html#Bool">Bool</a>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../.././Lean/Elab/Term.html#Lean.Elab.Term.TermElabM">Lean.Elab.TermElabM</a> (<span class="fn"><a href="../.././Init/Prelude.html#Option">Option</a> <a href="../.././Lean/Meta/Tactic/ElimInfo.html#Lean.Meta.ElimInfo">Lean.Meta.ElimInfo</a></span>)</span></div></div><p>Return <code>some info</code> if we should elaborate as an eliminator.</p><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details></div></div><div class="decl" id="Lean.Elab.Term.elabAppArgs.getElabAsElimExtraArgsPos"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/ebc32af2e606deef0d7b437e67f24c20ed866818/src/Lean/Elab/App.lean#L959-L972">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../.././Lean/Elab/App.html#Lean.Elab.Term.elabAppArgs.getElabAsElimExtraArgsPos"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Term</span>.<span class="name">elabAppArgs</span>.<span class="name">getElabAsElimExtraArgsPos</span></a></span><span class="decl_args">
<span class="fn">(elimInfo : <a href="../.././Lean/Meta/Tactic/ElimInfo.html#Lean.Meta.ElimInfo">Lean.Meta.ElimInfo</a>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../.././Lean/Meta/Basic.html#Lean.Meta.MetaM">Lean.MetaM</a> (<span class="fn"><a href="../.././Init/Prelude.html#Array">Array</a> <a href="../.././Init/Prelude.html#Nat">Nat</a></span>)</span></div></div><p>Collect extra argument positions that must be elaborated eagerly when using <code>elab_as_elim</code>.
The idea is that the contribute to motive inference. See comment at <code>ElamElim.Context.<a href="../.././Lean/Elab/App.html#Lean.Elab.Term.ElabElim.Context.extraArgsPos">extraArgsPos</a></code>.</p><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details></div></div><div class="decl" id="Lean.Elab.Term.elabAppArgs.isFirstOrder"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/ebc32af2e606deef0d7b437e67f24c20ed866818/src/Lean/Elab/App.lean#L978-L980">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../.././Lean/Elab/App.html#Lean.Elab.Term.elabAppArgs.isFirstOrder"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Term</span>.<span class="name">elabAppArgs</span>.<span class="name">isFirstOrder</span></a></span><span class="decl_args">
<span class="fn">(e : <a href="../.././Lean/Expr.html#Lean.Expr">Lean.Expr</a>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><a href="../.././Init/Prelude.html#Bool">Bool</a></div></div><details><summary>Equations</summary><ul class="equations"><li class="equation"><span class="fn"><span class="fn"><a href="../.././Lean/Elab/App.html#Lean.Elab.Term.elabAppArgs.isFirstOrder">Lean.Elab.Term.elabAppArgs.isFirstOrder</a> <span class="fn">e</span></span> <a href="../.././Init/Prelude.html#Eq">=</a>   <span class="fn"><a href="../.././Init/Data/Option/Basic.html#Option.isNone">Option.isNone</a> (<span class="fn"><a href="../.././Lean/Util/FindExpr.html#Lean.Expr.find?">Lean.Expr.find?</a> (<span class="fn">fun <span class="fn">e</span> =&gt <span class="fn"><span class="fn"><a href="../.././Lean/Expr.html#Lean.Expr.isApp">Lean.Expr.isApp</a> <span class="fn">e</span></span> <a href="../.././Init/Prelude.html#and">&amp&amp</a> <span class="fn"><a href="../.././Init/Prelude.html#not">!</a><span class="fn"><a href="../.././Lean/Expr.html#Lean.Expr.isConst">Lean.Expr.isConst</a> (<span class="fn"><a href="../.././Lean/Expr.html#Lean.Expr.getAppFn">Lean.Expr.getAppFn</a> <span class="fn">e</span></span>)</span></span></span></span>) <span class="fn">e</span></span>)</span></span></li></ul></details></div></div><div class="decl" id="Lean.Elab.Term.LValResolution"><div class="inductive"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/ebc32af2e606deef0d7b437e67f24c20ed866818/src/Lean/Elab/App.lean#L983-L987">source</a></div><div class="decl_header"><span class="decl_kind">inductive</span>
<span class="decl_name"><a class="break_within" href="../.././Lean/Elab/App.html#Lean.Elab.Term.LValResolution"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Term</span>.<span class="name">LValResolution</span></a></span><span class="decl_args"> :</span><div class="decl_type"><a href="../.././foundational_types.html">Type</a></div></div><ul class="constructors"><li class="constructor" id="Lean.Elab.Term.LValResolution.projFn">projFn: <span class="fn"><a href="../.././Init/Prelude.html#Lean.Name">Lean.Name</a> → <a href="../.././Init/Prelude.html#Lean.Name">Lean.Name</a> → <a href="../.././Init/Prelude.html#Lean.Name">Lean.Name</a> → <a href="../.././Lean/Elab/App.html#Lean.Elab.Term.LValResolution">Lean.Elab.Term.LValResolution</a></span></li><li class="constructor" id="Lean.Elab.Term.LValResolution.projIdx">projIdx: <span class="fn"><a href="../.././Init/Prelude.html#Lean.Name">Lean.Name</a> → <span class="fn"><a href="../.././Init/Prelude.html#Nat">Nat</a> → <a href="../.././Lean/Elab/App.html#Lean.Elab.Term.LValResolution">Lean.Elab.Term.LValResolution</a></span></span></li><li class="constructor" id="Lean.Elab.Term.LValResolution.const">const: <span class="fn"><a href="../.././Init/Prelude.html#Lean.Name">Lean.Name</a> → <a href="../.././Init/Prelude.html#Lean.Name">Lean.Name</a> → <a href="../.././Init/Prelude.html#Lean.Name">Lean.Name</a> → <a href="../.././Lean/Elab/App.html#Lean.Elab.Term.LValResolution">Lean.Elab.Term.LValResolution</a></span></li><li class="constructor" id="Lean.Elab.Term.LValResolution.localRec">localRec: <span class="fn"><a href="../.././Init/Prelude.html#Lean.Name">Lean.Name</a> → <a href="../.././Init/Prelude.html#Lean.Name">Lean.Name</a> → <span class="fn"><a href="../.././Lean/Expr.html#Lean.Expr">Lean.Expr</a> → <a href="../.././Lean/Elab/App.html#Lean.Elab.Term.LValResolution">Lean.Elab.Term.LValResolution</a></span></span></li></ul><p>Auxiliary inductive datatype that represents the resolution of an <code>LVal</code>.</p><details class="instances"><summary>Instances For</summary><ul id="instances-for-list-Lean.Elab.Term.LValResolution" class="instances-for-list"></ul></details></div></div><div class="decl" id="Lean.Elab.Term.elabExplicitUnivs"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/ebc32af2e606deef0d7b437e67f24c20ed866818/src/Lean/Elab/App.lean#L1253-L1254">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../.././Lean/Elab/App.html#Lean.Elab.Term.elabExplicitUnivs"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Term</span>.<span class="name">elabExplicitUnivs</span></a></span><span class="decl_args">
<span class="fn">(lvls : <span class="fn"><a href="../.././Init/Prelude.html#Array">Array</a> <a href="../.././Init/Prelude.html#Lean.Syntax">Lean.Syntax</a></span>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../.././Lean/Elab/Term.html#Lean.Elab.Term.TermElabM">Lean.Elab.TermElabM</a> (<span class="fn"><a href="../.././Init/Prelude.html#List">List</a> <a href="../.././Lean/Level.html#Lean.Level">Lean.Level</a></span>)</span></div></div><details><summary>Equations</summary><ul class="equations"><li class="equation"><span class="fn"><span class="fn"><a href="../.././Lean/Elab/App.html#Lean.Elab.Term.elabExplicitUnivs">Lean.Elab.Term.elabExplicitUnivs</a> <span class="fn">lvls</span></span> <a href="../.././Init/Prelude.html#Eq">=</a>   <span class="fn"><a href="../.././Init/Data/Array/Basic.html#Array.foldrM">Array.foldrM</a>
    (<span class="fn">fun <span class="fn">stx</span> <span class="fn">lvls</span> =&gt <span class="fn">do
      let __do_lift ← <span class="fn"><a href="../.././Lean/Elab/Term.html#Lean.Elab.Term.elabLevel">Lean.Elab.Term.elabLevel</a> <span class="fn">stx</span></span>
      <span class="fn"><a href="../.././Init/Prelude.html#Pure.pure">pure</a> (<span class="fn"><span class="fn">__do_lift</span> <a href="../.././Init/Prelude.html#List.cons">::</a> <span class="fn">lvls</span></span>)</span></span></span>)
    <span class="fn">[]</span> <span class="fn">lvls</span> (<span class="fn"><a href="../.././Init/Prelude.html#Array.size">Array.size</a> <span class="fn">lvls</span></span>)</span></span></li></ul></details></div></div><div class="mod_doc"><h1 class="markdown-heading" id="Interaction-between-errToSorry-and-observing">Interaction between <code>errToSorry</code> and <code><a href="../.././Init/Control/Except.html#observing">observing</a></code>. <a class="hover-link" href="#Interaction-between-errToSorry-and-observing">#</a></h1><ul>
<li>
<p>The method <code>elabTerm</code> catches exceptions, logs them, and returns a synthetic sorry (IF <code>ctx.errToSorry</code> == true).</p>
</li>
<li>
<p>When we elaborate choice nodes (and overloaded identifiers), we track multiple results using the <code><a href="../.././Init/Control/Except.html#observing">observing</a> x</code> combinator.
The <code><a href="../.././Init/Control/Except.html#observing">observing</a> x</code> executes <code>x</code> and returns a <code>TermElabResult</code>.</p>
</li>
</ul><p><code><a href="../.././Init/Control/Except.html#observing">observing</a> </code>x does not check for synthetic sorry's, just an exception. Thus, it may think <code>x</code> worked when it didn't
if a synthetic sorry was introduced. We decided that checking for synthetic sorrys at <code><a href="../.././Init/Control/Except.html#observing">observing</a></code> is not a good solution
because it would not be clear to decide what the "main" error message for the alternative is. When the result contains
a synthetic <code>sorry</code>, it is not clear which error message corresponds to the <code>sorry</code>. Moreover, while executing <code>x</code>, many
error messages may have been logged. Recall that we need an error per alternative at <code>mergeFailures</code>.</p><p>Thus, we decided to set <code>errToSorry</code> to <code>false</code> whenever processing choice nodes and overloaded symbols.</p><p>Important: we rely on the property that after <code>errToSorry</code> is set to
false, no elaboration function executed by <code>x</code> will reset it to
<code>true</code>.</p></div><div class="decl" id="Lean.Elab.Term.elabApp"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/ebc32af2e606deef0d7b437e67f24c20ed866818/src/Lean/Elab/App.lean#L1465-L1468">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../.././Lean/Elab/App.html#Lean.Elab.Term.elabApp"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Term</span>.<span class="name">elabApp</span></a></span><span class="decl_args"> :</span><div class="decl_type"><a href="../.././Lean/Elab/Term.html#Lean.Elab.Term.TermElab">Lean.Elab.Term.TermElab</a></div></div><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details></div></div><div class="decl" id="Lean.Elab.Term.elabIdent"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/ebc32af2e606deef0d7b437e67f24c20ed866818/src/Lean/Elab/App.lean#L1473-L1473">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../.././Lean/Elab/App.html#Lean.Elab.Term.elabIdent"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Term</span>.<span class="name">elabIdent</span></a></span><span class="decl_args"> :</span><div class="decl_type"><a href="../.././Lean/Elab/Term.html#Lean.Elab.Term.TermElab">Lean.Elab.Term.TermElab</a></div></div><details><summary>Equations</summary><ul class="equations"><li class="equation"><span class="fn"><a href="../.././Lean/Elab/App.html#Lean.Elab.Term.elabIdent">Lean.Elab.Term.elabIdent</a> <a href="../.././Init/Prelude.html#Eq">=</a> <a href="../.././Lean/Elab/App.html#_private.Lean.Elab.App.0.Lean.Elab.Term.elabAtom">Lean.Elab.Term.elabAtom</a></span></li></ul></details></div></div><div class="decl" id="Lean.Elab.Term.elabNamedPattern"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/ebc32af2e606deef0d7b437e67f24c20ed866818/src/Lean/Elab/App.lean#L1474-L1474">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../.././Lean/Elab/App.html#Lean.Elab.Term.elabNamedPattern"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Term</span>.<span class="name">elabNamedPattern</span></a></span><span class="decl_args"> :</span><div class="decl_type"><a href="../.././Lean/Elab/Term.html#Lean.Elab.Term.TermElab">Lean.Elab.Term.TermElab</a></div></div><details><summary>Equations</summary><ul class="equations"><li class="equation"><span class="fn"><a href="../.././Lean/Elab/App.html#Lean.Elab.Term.elabNamedPattern">Lean.Elab.Term.elabNamedPattern</a> <a href="../.././Init/Prelude.html#Eq">=</a> <a href="../.././Lean/Elab/App.html#_private.Lean.Elab.App.0.Lean.Elab.Term.elabAtom">Lean.Elab.Term.elabAtom</a></span></li></ul></details></div></div><div class="decl" id="Lean.Elab.Term.elabDotIdent"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/ebc32af2e606deef0d7b437e67f24c20ed866818/src/Lean/Elab/App.lean#L1475-L1475">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../.././Lean/Elab/App.html#Lean.Elab.Term.elabDotIdent"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Term</span>.<span class="name">elabDotIdent</span></a></span><span class="decl_args"> :</span><div class="decl_type"><a href="../.././Lean/Elab/Term.html#Lean.Elab.Term.TermElab">Lean.Elab.Term.TermElab</a></div></div><details><summary>Equations</summary><ul class="equations"><li class="equation"><span class="fn"><a href="../.././Lean/Elab/App.html#Lean.Elab.Term.elabDotIdent">Lean.Elab.Term.elabDotIdent</a> <a href="../.././Init/Prelude.html#Eq">=</a> <a href="../.././Lean/Elab/App.html#_private.Lean.Elab.App.0.Lean.Elab.Term.elabAtom">Lean.Elab.Term.elabAtom</a></span></li></ul></details></div></div><div class="decl" id="Lean.Elab.Term.elabExplicitUniv"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/ebc32af2e606deef0d7b437e67f24c20ed866818/src/Lean/Elab/App.lean#L1476-L1476">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../.././Lean/Elab/App.html#Lean.Elab.Term.elabExplicitUniv"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Term</span>.<span class="name">elabExplicitUniv</span></a></span><span class="decl_args"> :</span><div class="decl_type"><a href="../.././Lean/Elab/Term.html#Lean.Elab.Term.TermElab">Lean.Elab.Term.TermElab</a></div></div><details><summary>Equations</summary><ul class="equations"><li class="equation"><span class="fn"><a href="../.././Lean/Elab/App.html#Lean.Elab.Term.elabExplicitUniv">Lean.Elab.Term.elabExplicitUniv</a> <a href="../.././Init/Prelude.html#Eq">=</a> <a href="../.././Lean/Elab/App.html#_private.Lean.Elab.App.0.Lean.Elab.Term.elabAtom">Lean.Elab.Term.elabAtom</a></span></li></ul></details></div></div><div class="decl" id="Lean.Elab.Term.elabPipeProj"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/ebc32af2e606deef0d7b437e67f24c20ed866818/src/Lean/Elab/App.lean#L1477-L1482">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../.././Lean/Elab/App.html#Lean.Elab.Term.elabPipeProj"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Term</span>.<span class="name">elabPipeProj</span></a></span><span class="decl_args"> :</span><div class="decl_type"><a href="../.././Lean/Elab/Term.html#Lean.Elab.Term.TermElab">Lean.Elab.Term.TermElab</a></div></div><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details></div></div><div class="decl" id="Lean.Elab.Term.elabExplicit"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/ebc32af2e606deef0d7b437e67f24c20ed866818/src/Lean/Elab/App.lean#L1484-L1490">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../.././Lean/Elab/App.html#Lean.Elab.Term.elabExplicit"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Term</span>.<span class="name">elabExplicit</span></a></span><span class="decl_args"> :</span><div class="decl_type"><a href="../.././Lean/Elab/Term.html#Lean.Elab.Term.TermElab">Lean.Elab.Term.TermElab</a></div></div><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details></div></div><div class="decl" id="Lean.Elab.Term.elabChoice"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/ebc32af2e606deef0d7b437e67f24c20ed866818/src/Lean/Elab/App.lean#L1492-L1492">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../.././Lean/Elab/App.html#Lean.Elab.Term.elabChoice"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Term</span>.<span class="name">elabChoice</span></a></span><span class="decl_args"> :</span><div class="decl_type"><a href="../.././Lean/Elab/Term.html#Lean.Elab.Term.TermElab">Lean.Elab.Term.TermElab</a></div></div><details><summary>Equations</summary><ul class="equations"><li class="equation"><span class="fn"><a href="../.././Lean/Elab/App.html#Lean.Elab.Term.elabChoice">Lean.Elab.Term.elabChoice</a> <a href="../.././Init/Prelude.html#Eq">=</a> <a href="../.././Lean/Elab/App.html#_private.Lean.Elab.App.0.Lean.Elab.Term.elabAtom">Lean.Elab.Term.elabAtom</a></span></li></ul></details></div></div><div class="decl" id="Lean.Elab.Term.elabProj"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/ebc32af2e606deef0d7b437e67f24c20ed866818/src/Lean/Elab/App.lean#L1493-L1493">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../.././Lean/Elab/App.html#Lean.Elab.Term.elabProj"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Term</span>.<span class="name">elabProj</span></a></span><span class="decl_args"> :</span><div class="decl_type"><a href="../.././Lean/Elab/Term.html#Lean.Elab.Term.TermElab">Lean.Elab.Term.TermElab</a></div></div><details><summary>Equations</summary><ul class="equations"><li class="equation"><span class="fn"><a href="../.././Lean/Elab/App.html#Lean.Elab.Term.elabProj">Lean.Elab.Term.elabProj</a> <a href="../.././Init/Prelude.html#Eq">=</a> <a href="../.././Lean/Elab/App.html#_private.Lean.Elab.App.0.Lean.Elab.Term.elabAtom">Lean.Elab.Term.elabAtom</a></span></li></ul></details></div></div></main>
<nav class="nav"><iframe src="../.././navbar.html" class="navframe" frameBorder="0"></iframe></nav></body></html>
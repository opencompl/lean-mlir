<html lang="en"><head><meta charset="UTF-8"></meta><meta name="viewport" content="width=device-width, initial-scale=1"></meta><link rel="stylesheet" href=".././style.css"></link><link rel="stylesheet" href=".././src/pygments.css"></link><link rel="shortcut icon" href=".././favicon.ico"></link><link rel="prefetch" href=".././/declarations/declaration-data.bmp" as="image"></link><title>Lean.HeadIndex</title><script defer="true" src=".././mathjax-config.js"></script><script defer="true" src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script><script defer="true" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script><script>const SITE_ROOT=".././";</script><script>const MODULE_NAME="Lean.HeadIndex";</script><script type="module" src=".././search.js"></script><script type="module" src=".././how-about.js"></script><script type="module" src=".././instances.js"></script><script type="module" src=".././importedBy.js"></script></head><body><input id="nav_toggle" type="checkbox"></input><header><h1><label for="nav_toggle"></label>Documentation</h1><p class="header_filename break_within"><span class="name">Lean</span>.<span class="name">HeadIndex</span></p><form action="https://google.com/search" method="get" id="search_form"><input type="hidden" name="sitesearch" value="https://leanprover-community.github.io/mathlib4_docs"></input><input type="text" name="q" autocomplete="off"></input>&#32;
            <button id="search_button" onclick="javascript: form.action='.././search.html';">Search</button><button>Google site search</button></form></header><nav class="internal_nav"><h3><a class="break_within" href="#top"><span class="name">Lean</span>.<span class="name">HeadIndex</span></a></h3><p class="gh_nav_link"><a href="https://github.com/leanprover/lean4/blob/ebc32af2e606deef0d7b437e67f24c20ed866818/src/Lean/HeadIndex.lean">source</a></p><div class="imports"><details><summary>Imports</summary><ul><li><a href=".././Init.html">Init</a></li><li><a href=".././Lean/Expr.html">Lean.Expr</a></li></ul></details><details><summary>Imported by</summary><ul id="imported-by-Lean.HeadIndex" class="imported-by-list"></ul></details></div><div class="nav_link"><a class="break_within" href="#Lean.HeadIndex"><span class="name">Lean</span>.<span class="name">HeadIndex</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.instInhabitedHeadIndex"><span class="name">Lean</span>.<span class="name">instInhabitedHeadIndex</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.instBEqHeadIndex"><span class="name">Lean</span>.<span class="name">instBEqHeadIndex</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.instReprHeadIndex"><span class="name">Lean</span>.<span class="name">instReprHeadIndex</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.HeadIndex.HeadIndex.hash"><span class="name">Lean</span>.<span class="name">HeadIndex</span>.<span class="name">HeadIndex</span>.<span class="name">hash</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.HeadIndex.instHashableHeadIndex"><span class="name">Lean</span>.<span class="name">HeadIndex</span>.<span class="name">instHashableHeadIndex</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Expr.headNumArgs"><span class="name">Lean</span>.<span class="name">Expr</span>.<span class="name">headNumArgs</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Expr.headNumArgs.go"><span class="name">Lean</span>.<span class="name">Expr</span>.<span class="name">headNumArgs</span>.<span class="name">go</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Expr.toHeadIndex"><span class="name">Lean</span>.<span class="name">Expr</span>.<span class="name">toHeadIndex</span></a></div></nav><main>
<div class="decl" id="Lean.HeadIndex"><div class="inductive"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/ebc32af2e606deef0d7b437e67f24c20ed866818/src/Lean/HeadIndex.lean#L23-L32">source</a></div><div class="decl_header"><span class="decl_kind">inductive</span>
<span class="decl_name"><a class="break_within" href=".././Lean/HeadIndex.html#Lean.HeadIndex"><span class="name">Lean</span>.<span class="name">HeadIndex</span></a></span><span class="decl_args"> :</span><div class="decl_type"><a href=".././foundational_types.html">Type</a></div></div><ul class="constructors"><li class="constructor" id="Lean.HeadIndex.fvar">fvar: <span class="fn"><a href=".././Lean/Expr.html#Lean.FVarId">Lean.FVarId</a> → <a href=".././Lean/HeadIndex.html#Lean.HeadIndex">Lean.HeadIndex</a></span></li><li class="constructor" id="Lean.HeadIndex.mvar">mvar: <span class="fn"><a href=".././Lean/Expr.html#Lean.MVarId">Lean.MVarId</a> → <a href=".././Lean/HeadIndex.html#Lean.HeadIndex">Lean.HeadIndex</a></span></li><li class="constructor" id="Lean.HeadIndex.const">const: <span class="fn"><a href=".././Init/Prelude.html#Lean.Name">Lean.Name</a> → <a href=".././Lean/HeadIndex.html#Lean.HeadIndex">Lean.HeadIndex</a></span></li><li class="constructor" id="Lean.HeadIndex.proj">proj: <span class="fn"><a href=".././Init/Prelude.html#Lean.Name">Lean.Name</a> → <span class="fn"><a href=".././Init/Prelude.html#Nat">Nat</a> → <a href=".././Lean/HeadIndex.html#Lean.HeadIndex">Lean.HeadIndex</a></span></span></li><li class="constructor" id="Lean.HeadIndex.lit">lit: <span class="fn"><a href=".././Lean/Expr.html#Lean.Literal">Lean.Literal</a> → <a href=".././Lean/HeadIndex.html#Lean.HeadIndex">Lean.HeadIndex</a></span></li><li class="constructor" id="Lean.HeadIndex.sort">sort: <a href=".././Lean/HeadIndex.html#Lean.HeadIndex">Lean.HeadIndex</a></li><li class="constructor" id="Lean.HeadIndex.lam">lam: <a href=".././Lean/HeadIndex.html#Lean.HeadIndex">Lean.HeadIndex</a></li><li class="constructor" id="Lean.HeadIndex.forallE">forallE: <a href=".././Lean/HeadIndex.html#Lean.HeadIndex">Lean.HeadIndex</a></li></ul><p>Datastructure for representing the "head symbol" of an expression.
It is the key of <code>KExprMap</code>.
Examples:</p><ul>
<li>The head of <code>f a</code> is <code>.<a href=".././Lean/HeadIndex.html#Lean.HeadIndex.const">const</a> f</code></li>
<li>The head of <code>let x := 1; f x</code> is <code>.<a href=".././Lean/HeadIndex.html#Lean.HeadIndex.const">const</a> f</code></li>
<li>The head of <code>fun x => fun</code> is <code>.<a href=".././Lean/HeadIndex.html#Lean.HeadIndex.lam">lam</a></code></li>
</ul><p><code><a href=".././Lean/HeadIndex.html#Lean.HeadIndex">HeadIndex</a></code> is a very simple index, and is used in situations where
we want to find definitionally equal terms, but we want to minimize
the search by checking only pairs of terms that have the same
<code><a href=".././Lean/HeadIndex.html#Lean.HeadIndex">HeadIndex</a></code>.</p><details class="instances"><summary>Instances For</summary><ul id="instances-for-list-Lean.HeadIndex" class="instances-for-list"></ul></details></div></div><div class="decl" id="Lean.instInhabitedHeadIndex"><div class="instance"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/ebc32af2e606deef0d7b437e67f24c20ed866818/src/Lean/HeadIndex.lean#L32-L32">source</a></div><div class="decl_header"><span class="decl_kind">instance</span>
<span class="decl_name"><a class="break_within" href=".././Lean/HeadIndex.html#Lean.instInhabitedHeadIndex"><span class="name">Lean</span>.<span class="name">instInhabitedHeadIndex</span></a></span><span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href=".././Init/Prelude.html#Inhabited">Inhabited</a> <a href=".././Lean/HeadIndex.html#Lean.HeadIndex">Lean.HeadIndex</a></span></div></div><details><summary>Equations</summary><ul class="equations"><li class="equation"><span class="fn"><a href=".././Lean/HeadIndex.html#Lean.instInhabitedHeadIndex">Lean.instInhabitedHeadIndex</a> <a href=".././Init/Prelude.html#Eq">=</a> <span class="fn">{ <span class="fn">default</span> := <span class="fn"><a href=".././Lean/HeadIndex.html#Lean.HeadIndex.fvar">Lean.HeadIndex.fvar</a> <span class="fn">default</span></span> }</span></span></li></ul></details></div></div><div class="decl" id="Lean.instBEqHeadIndex"><div class="instance"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/ebc32af2e606deef0d7b437e67f24c20ed866818/src/Lean/HeadIndex.lean#L32-L32">source</a></div><div class="decl_header"><span class="decl_kind">instance</span>
<span class="decl_name"><a class="break_within" href=".././Lean/HeadIndex.html#Lean.instBEqHeadIndex"><span class="name">Lean</span>.<span class="name">instBEqHeadIndex</span></a></span><span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href=".././Init/Prelude.html#BEq">BEq</a> <a href=".././Lean/HeadIndex.html#Lean.HeadIndex">Lean.HeadIndex</a></span></div></div><details><summary>Equations</summary><ul class="equations"><li class="equation"><span class="fn"><a href=".././Lean/HeadIndex.html#Lean.instBEqHeadIndex">Lean.instBEqHeadIndex</a> <a href=".././Init/Prelude.html#Eq">=</a> <span class="fn">{ <span class="fn">beq</span> := <a href=".././Lean/HeadIndex.html#_private.Lean.HeadIndex.0.Lean.beqHeadIndex._@.Lean.HeadIndex._hyg.67">Lean.beqHeadIndex✝</a> }</span></span></li></ul></details></div></div><div class="decl" id="Lean.instReprHeadIndex"><div class="instance"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/ebc32af2e606deef0d7b437e67f24c20ed866818/src/Lean/HeadIndex.lean#L32-L32">source</a></div><div class="decl_header"><span class="decl_kind">instance</span>
<span class="decl_name"><a class="break_within" href=".././Lean/HeadIndex.html#Lean.instReprHeadIndex"><span class="name">Lean</span>.<span class="name">instReprHeadIndex</span></a></span><span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href=".././Init/Data/Repr.html#Repr">Repr</a> <a href=".././Lean/HeadIndex.html#Lean.HeadIndex">Lean.HeadIndex</a></span></div></div><details><summary>Equations</summary><ul class="equations"><li class="equation"><span class="fn"><a href=".././Lean/HeadIndex.html#Lean.instReprHeadIndex">Lean.instReprHeadIndex</a> <a href=".././Init/Prelude.html#Eq">=</a> <span class="fn">{ <span class="fn">reprPrec</span> := <a href=".././Lean/HeadIndex.html#_private.Lean.HeadIndex.0.Lean.reprHeadIndex._@.Lean.HeadIndex._hyg.334">Lean.reprHeadIndex✝</a> }</span></span></li></ul></details></div></div><div class="decl" id="Lean.HeadIndex.HeadIndex.hash"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/ebc32af2e606deef0d7b437e67f24c20ed866818/src/Lean/HeadIndex.lean#L37-L45">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href=".././Lean/HeadIndex.html#Lean.HeadIndex.HeadIndex.hash"><span class="name">Lean</span>.<span class="name">HeadIndex</span>.<span class="name">HeadIndex</span>.<span class="name">hash</span></a></span><span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href=".././Lean/HeadIndex.html#Lean.HeadIndex">Lean.HeadIndex</a> → <a href=".././Init/Prelude.html#UInt64">UInt64</a></span></div></div><p>Hash code for a <code><a href=".././Lean/HeadIndex.html#Lean.HeadIndex">HeadIndex</a></code> value.</p><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details></div></div><div class="decl" id="Lean.HeadIndex.instHashableHeadIndex"><div class="instance"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/ebc32af2e606deef0d7b437e67f24c20ed866818/src/Lean/HeadIndex.lean#L47-L47">source</a></div><div class="decl_header"><span class="decl_kind">instance</span>
<span class="decl_name"><a class="break_within" href=".././Lean/HeadIndex.html#Lean.HeadIndex.instHashableHeadIndex"><span class="name">Lean</span>.<span class="name">HeadIndex</span>.<span class="name">instHashableHeadIndex</span></a></span><span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href=".././Init/Prelude.html#Hashable">Hashable</a> <a href=".././Lean/HeadIndex.html#Lean.HeadIndex">Lean.HeadIndex</a></span></div></div><details><summary>Equations</summary><ul class="equations"><li class="equation"><span class="fn"><a href=".././Lean/HeadIndex.html#Lean.HeadIndex.instHashableHeadIndex">Lean.HeadIndex.instHashableHeadIndex</a> <a href=".././Init/Prelude.html#Eq">=</a> <span class="fn">{ <span class="fn">hash</span> := <a href=".././Lean/HeadIndex.html#Lean.HeadIndex.HeadIndex.hash">Lean.HeadIndex.HeadIndex.hash</a> }</span></span></li></ul></details></div></div><div class="decl" id="Lean.Expr.headNumArgs"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/ebc32af2e606deef0d7b437e67f24c20ed866818/src/Lean/HeadIndex.lean#L54-L61">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href=".././Lean/HeadIndex.html#Lean.Expr.headNumArgs"><span class="name">Lean</span>.<span class="name">Expr</span>.<span class="name">headNumArgs</span></a></span><span class="decl_args">
<span class="fn">(e : <a href=".././Lean/Expr.html#Lean.Expr">Lean.Expr</a>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><a href=".././Init/Prelude.html#Nat">Nat</a></div></div><p>Return the number of arguments in the given expression with respect to its <code><a href=".././Lean/HeadIndex.html#Lean.HeadIndex">HeadIndex</a></code></p><details><summary>Equations</summary><ul class="equations"><li class="equation"><span class="fn"><span class="fn"><a href=".././Lean/HeadIndex.html#Lean.Expr.headNumArgs">Lean.Expr.headNumArgs</a> <span class="fn">e</span></span> <a href=".././Init/Prelude.html#Eq">=</a> <span class="fn"><a href=".././Lean/HeadIndex.html#Lean.Expr.headNumArgs.go">Lean.Expr.headNumArgs.go</a> <span class="fn">e</span> <span class="fn">0</span></span></span></li></ul></details></div></div><div class="decl" id="Lean.Expr.headNumArgs.go"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/ebc32af2e606deef0d7b437e67f24c20ed866818/src/Lean/HeadIndex.lean#L57-L61">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href=".././Lean/HeadIndex.html#Lean.Expr.headNumArgs.go"><span class="name">Lean</span>.<span class="name">Expr</span>.<span class="name">headNumArgs</span>.<span class="name">go</span></a></span><span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href=".././Lean/Expr.html#Lean.Expr">Lean.Expr</a> → <span class="fn"><a href=".././Init/Prelude.html#Nat">Nat</a> → <a href=".././Init/Prelude.html#Nat">Nat</a></span></span></div></div><details><summary>Equations</summary><ul class="equations"><li class="equation"><span class="fn"><span class="fn"><a href=".././Lean/HeadIndex.html#Lean.Expr.headNumArgs.go">Lean.Expr.headNumArgs.go</a> (<span class="fn"><a href=".././Lean/Expr.html#Lean.Expr.app">Lean.Expr.app</a> <span class="fn">f</span> <span class="fn">arg</span></span>) <span class="fn">x</span></span> <a href=".././Init/Prelude.html#Eq">=</a> <span class="fn"><a href=".././Lean/HeadIndex.html#Lean.Expr.headNumArgs.go">Lean.Expr.headNumArgs.go</a> <span class="fn">f</span> (<span class="fn"><span class="fn">x</span> <a href=".././Init/Prelude.html#HAdd.hAdd">+</a> <span class="fn">1</span></span>)</span></span></li><li class="equation"><span class="fn"><span class="fn"><a href=".././Lean/HeadIndex.html#Lean.Expr.headNumArgs.go">Lean.Expr.headNumArgs.go</a> (<span class="fn"><a href=".././Lean/Expr.html#Lean.Expr.letE">Lean.Expr.letE</a> <span class="fn">declName</span> <span class="fn">type</span> <span class="fn">value</span> <span class="fn">b</span> <span class="fn">nonDep</span></span>) <span class="fn">x</span></span> <a href=".././Init/Prelude.html#Eq">=</a> <span class="fn"><a href=".././Lean/HeadIndex.html#Lean.Expr.headNumArgs.go">Lean.Expr.headNumArgs.go</a> <span class="fn">b</span> <span class="fn">x</span></span></span></li><li class="equation"><span class="fn"><span class="fn"><a href=".././Lean/HeadIndex.html#Lean.Expr.headNumArgs.go">Lean.Expr.headNumArgs.go</a> (<span class="fn"><a href=".././Lean/Expr.html#Lean.Expr.mdata">Lean.Expr.mdata</a> <span class="fn">data</span> <span class="fn">e</span></span>) <span class="fn">x</span></span> <a href=".././Init/Prelude.html#Eq">=</a> <span class="fn"><a href=".././Lean/HeadIndex.html#Lean.Expr.headNumArgs.go">Lean.Expr.headNumArgs.go</a> <span class="fn">e</span> <span class="fn">x</span></span></span></li><li class="equation"><span class="fn"><span class="fn"><a href=".././Lean/HeadIndex.html#Lean.Expr.headNumArgs.go">Lean.Expr.headNumArgs.go</a> <span class="fn">x</span> <span class="fn">x</span></span> <a href=".././Init/Prelude.html#Eq">=</a> <span class="fn">x</span></span></li></ul></details></div></div><div class="decl" id="Lean.Expr.toHeadIndex"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/ebc32af2e606deef0d7b437e67f24c20ed866818/src/Lean/HeadIndex.lean#L108-L111">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href=".././Lean/HeadIndex.html#Lean.Expr.toHeadIndex"><span class="name">Lean</span>.<span class="name">Expr</span>.<span class="name">toHeadIndex</span></a></span><span class="decl_args">
<span class="fn">(e : <a href=".././Lean/Expr.html#Lean.Expr">Lean.Expr</a>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><a href=".././Lean/HeadIndex.html#Lean.HeadIndex">Lean.HeadIndex</a></div></div><p>Convert the given expression into a <code><a href=".././Lean/HeadIndex.html#Lean.HeadIndex">HeadIndex</a></code>.</p><details><summary>Equations</summary><ul class="equations"><li class="equation"><span class="fn"><span class="fn"><a href=".././Lean/HeadIndex.html#Lean.Expr.toHeadIndex">Lean.Expr.toHeadIndex</a> <span class="fn">e</span></span> <a href=".././Init/Prelude.html#Eq">=</a>   <span class="fn">match <span class="fn"><a href=".././Lean/HeadIndex.html#_private.Lean.HeadIndex.0.Lean.Expr.toHeadIndexQuick?">Lean.Expr.toHeadIndexQuick?</a> <span class="fn">e</span></span> with
  | <span class="fn"><a href=".././Init/Prelude.html#Option.some">some</a> <span class="fn">i</span></span> =&gt <span class="fn">i</span>
  | <span class="fn">none</span> =&gt <span class="fn"><a href=".././Init/Prelude.html#Option.none">Lean.Expr.toHeadIndexSlow</a> <span class="fn">e</span></span></span></span></li></ul></details></div></div></main>
<nav class="nav"><iframe src=".././navbar.html" class="navframe" frameBorder="0"></iframe></nav></body></html>